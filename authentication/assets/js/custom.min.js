var form_name="",phoneid="";function forgotpass_hook(e){var o={container:"forgotpassword-container",onSuccess:function(o){var t=setInterval(function(){void 0!==LRObject.options&&(clearInterval(t),1==o.IsPosted&&void 0!==o.Data&&null!==o.Data?ciamfunctions.message(commonOptions.messageList.FORGOT_PASSWORD_PHONE_MSG,"#forgotpasswordmessage","success"):1==LRObject.options.otpEmailVerification&&void 0===o.Data?(jQuery("#loginradius-button-resendotp").blur(),ciamfunctions.message(commonOptions.messageList.FORGOT_PHONE_OTP_VERIFICATION_MSG,"#forgotpasswordmessage","success")):"resetPassword"==form_name?(ciamfunctions.message(commonOptions.messageList.FORGOT_PASSWORD_SUCCESS_MSG,"#forgotpasswordmessage","success"),window.setTimeout(function(){window.location.href=e},3e3)):ciamfunctions.message(commonOptions.messageList.FORGOT_PASSWORD_MSG,"#forgotpasswordmessage","success"),jQuery('input[type="text"]').val(""),jQuery('input[type="password"]').val(""))},1)},onError:function(e){jQuery('input[type="text"]').val(""),jQuery('input[type="password"]').val(""),ciamfunctions.message(e[0].Description,"#forgotpasswordmessage","error"),jQuery("#ciam-forgotpassword-emailid").val(""),jQuery("#ciam_loading_gif").hide()}};o.verificationUrl=window.location;var t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.$hooks.register("startProcess",function(e){"resetPassword"==e&&(form_name=e),jQuery("#ciam_loading_gif").show()}),LRObject.init("forgotPassword",o))},1)}function optionalTwoFA(){var e={container:"authentication-container",onSuccess:function(e){e.Sid&&(jQuery("#authdiv_success").remove(),jQuery("#authdiv_error").remove(),jQuery("#authentication-container").after("<span id='authdiv_success'></span>"),ciamfunctions.message(commonOptions.messageList.TWO_FA_MSG,"#authdiv_success","success")),1==e.IsDeleted?(jQuery("#authentication-container").after("<span id='authdiv_success'>"+commonOptions.messageList.TWO_FA_DISABLED_MSG+"</span>"),setTimeout(function(){location.reload()},2e3)):void 0!==e.Uid&&(jQuery("#authdiv_success").remove(),jQuery("#authentication-container").after("<span id='authdiv_success'>"+commonOptions.messageList.TWO_FA_ENABLED_MSG+"</span>"),setTimeout(function(){location.reload()},2e3))},onError:function(e){jQuery("#authdiv_success").remove(),jQuery("#authdiv_error").remove(),jQuery("#authentication-container").after("<span id='authdiv_error'>"+e[0].Description+"</span>"),setTimeout(function(){location.reload()},2e3)}},o=setInterval(function(){void 0!==LRObject.options&&""!=LRObject.options&&(clearInterval(o),!0!==LRObject.options.twoFactorAuthentication&&!0!==LRObject.options.optionalTwoFactorAuthentication||(jQuery(".profiletwofactorauthentication").show(),LRObject.init("createTwoFactorAuthentication",e)))},1)}function login_hook(e){var o={onSuccess:function(o){if(1==o.IsPosted&&void 0!==o.access_token)0!==jQuery("#loginradius-login-username").length?ciamfunctions.message(commonOptions.messageList.LOGIN_BY_USERNAME_MSG,"#loginmessage","success"):0!==jQuery("#loginradius-login-emailid").length&&ciamfunctions.message(commonOptions.messageList.LOGIN_BY_EMAIL_MSG,"#loginmessage","success"),setTimeout(function(){ciamfunctions.redirect(o.access_token,"token",e)},500);else if(void 0!==o.Data&&void 0!==o.Data.Sid)ciamfunctions.message(commonOptions.messageList.LOGIN_BY_PHONE_MSG,"#loginmessage","success");else if(void 0!==o.Data)ciamfunctions.message(commonOptions.messageList.EMAIL_VERIFICATION_SUCCESS_MSG,"#loginmessage","success"),setTimeout(function(){window.location.href=e},3e3);else if(1==o.IsPosted)ciamfunctions.message(commonOptions.messageList.LOGIN_BY_EMAIL_MSG,"#loginmessage","success");else if(o.access_token){sessionStorage.access_token=o.access_token;var t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.$hooks.register("endProcess",function(e){jQuery("#ciam_loading_gif").show()}))},1);ciamfunctions.redirect(o.access_token,"token",e)}},onError:function(e){jQuery(window).scrollTop(0),ciamfunctions.message(e[0].Description,"#loginmessage","error")},container:"login-container"},t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.init("login",o))},1)}function oneclicksignin(){var e={onSuccess:function(e){e.access_token&&ciamfunctions.redirect(e.access_token,"token","")},onError:function(e){ciamfunctions.message(e[0].Description,"#loginmessage","error")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("instantLinkLogin",e))},1)}function registration_hook(e){var o={onSuccess:function(o){jQuery("input").val(""),jQuery("textarea").val(""),jQuery("select").val(""),jQuery("#loginradius-submit-register").val("Register"),jQuery("#loginradius-submit-verify").val("Verify"),jQuery("#loginradius-button-resendotp").val("Resend OTP"),jQuery("#loginradius-otp-skip").val("Skip"),jQuery("#ciam_loading_gif").hide();var t=setInterval(function(){if(void 0!==LRObject.options){if(clearInterval(t),void 0!==LRObject.options.optionalEmailVerification)var s=LRObject.options.optionalEmailVerification;else s="";if(void 0!==LRObject.options.disabledEmailVerification)var i=LRObject.options.disabledEmailVerification;else i="";o.IsPosted&&void 0===o.Data?(void 0!==s&&!0===s||void 0!==i&&!0===i||ciamfunctions.message(commonOptions.messageList.REGISTRATION_VERIFICATION_MSG,"#registration_message","success"),setTimeout(function(){window.location.href=e},2e3)):o.access_token?ciamfunctions.redirect(o.access_token,"token",e):o.IsPosted&&void 0!==o.Data&&null!==o.Data&&void 0!==o.Data.Sid?(jQuery("#loginradius-button-resendotp").blur(),ciamfunctions.message(commonOptions.messageList.REGISTRATION_OTP_MSG,"#registration_message","success")):1==LRObject.options.otpEmailVerification&&null==o.Data?(jQuery("#loginradius-button-resendotp").blur(),ciamfunctions.message(commonOptions.messageList.REGISTRATION_OTP_VERIFICATION_MSG,"#registration_message","success")):(ciamfunctions.message(commonOptions.messageList.REGISTRATION_SUCCESS_MSG,"#registration_message","success"),setTimeout(function(){window.location.href=e},2e3)),jQuery(window).scrollTop(0)}},1)},onError:function(e){jQuery("input").val(""),jQuery("textarea").val(""),jQuery("select").val(""),jQuery("#loginradius-submit-register").val("Register"),jQuery("#loginradius-submit-verify").val("Verify"),jQuery("#loginradius-otp-skip").val("Skip"),jQuery("#loginradius-button-resendotp").val("Resend OTP"),jQuery(window).scrollTop(0),ciamfunctions.message(e[0].Description,"#registration_message","error"),jQuery("#ciam_loading_gif").hide()},container:"registration-container"},t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.init("registration",o))},1)}function emailverification(e){var o={onSuccess:function(o){o.access_token?ciamfunctions.redirect(o.access_token,"token",e):(jQuery("#ciam_loading_gif").hide(),ciamfunctions.message(commonOptions.messageList.EMAIL_VERIFICATION_SUCCESS_MSG,"#loginmessage","success"),setTimeout(function(){window.location.href=e},3e3))},onError:function(o){ciamfunctions.message(o[0].Description,"#loginmessage","error"),jQuery("#ciam_loading_gif").hide(),setTimeout(function(){window.location.href=e},3e3)}},t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.init("verifyEmail",o))},1)}function social(e){var o={templateName:"loginradiuscustom_tmpl"},t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.customInterface(".interfacecontainerdiv",o))},1),s={onSuccess:function(o){1==o.IsPosted&&void 0===o.Data.AccountSid?(ciamfunctions.message(commonOptions.messageList.SOCIAL_LOGIN_MSG,"#loginmessage","success"),setTimeout(function(){location.reload()},5e3)):o.access_token?ciamfunctions.redirect(o.access_token,"token",e):void 0!==o.Data&&void 0!==o.Data.Sid&&ciamfunctions.message("An OTP has been sent.","#loginmessage","success")},onError:function(e){ciamfunctions.message(e[0].Description,"#loginmessage","error")},container:"sociallogin-container"},i=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(i),LRObject.init("socialLogin",s))},1)}function changepasswordform(){var e={container:"changepassword-container",onSuccess:function(e){jQuery(".popup-txt").html('<span id="password_msg_success">'+commonOptions.messageList.CHANGE_PASSWORD_SUCCESS_MSG+"</span>"),jQuery("#loginradius-submit-submit").attr("disabled","disabled"),setTimeout(function(){location.reload()},3e3)},onError:function(e){jQuery(".popup-txt").html('<span id="password_msg_error">'+e[0].Description+"</span>")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("changePassword",e))},1);jQuery(document).ready(function(){jQuery("#open_password_popup").on("click",function(){jQuery(".popup-outer-password").fadeIn("slow")}),jQuery("#close_password_popup").on("click",function(){jQuery(".popup-outer-password").fadeOut("slow")}),jQuery("#loginradius-submit-send").on("click",function(){jQuery(".popup-outer-password").fadeOut("slow")})})}function setpasswordform(){jQuery(document).ready(function(){jQuery("#open_password_popup").on("click",function(){jQuery(".popup-outer-password").fadeIn("slow")}),jQuery("#close_password_popup").on("click",function(){jQuery(".popup-outer-password").fadeOut("slow")}),jQuery("#loginradius-submit-send").on("click",function(){jQuery(".popup-outer-password").fadeOut("slow")})})}function generatebackupcodebutton(e){jQuery("#password").after('<tr id="backupcode" class="user-pass1-wrap"><th><span>Backup code list</span></th><td><span class="get-backup-msg" style="display:none;">If you lose your phone or can\'t receive codes via SMS, voice call or Google Authenticator, you can use backup codes to sign in. So please save these backup codes somewhere.</span><span class="reset-backup-msg" style="display:none;">The two factor authentication backup code is already generated, please reset your two factor authentication backup code.</span><a href="javascript:void(0);" id="backupcode" class="ciam-password-button button" onclick="generatebackupcode(\''+e+'\')" >Reset backup Code</a></td></tr><tr id="codelist"></tr>'),jQuery("#ciam_loading_gif").show();var o='<td colspan="2"><div style="width:100%;">',t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.api.getBackupCode(e,function(e){jQuery.each(e.BackUpCodes,function(e,t){o+='<div class="backupcode-div"><input class="backupcode-width" id="\''+t+"'\" onClick=\"copyToClipboard('"+t+'\');this.select();" type="text" readonly value="'+t+'" /></div>'}),jQuery(".get-backup-msg").css("display","block"),jQuery(".reset-backup-msg").css("display","none"),o+="</div><div><span onclick='copybackupcode()' id='copybackupcode'>Copy</span> <span class='copyMessage'>Copied!</span></div></td>",jQuery("#codelist").html(o),jQuery("#ciam_loading_gif").hide()},function(e){jQuery(".reset-backup-msg").css("display","block")}))},1)}function generatebackupcode(e){jQuery("#ciam_loading_gif").show();var o='<td colspan="2"><div style="width:100%;">',t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.api.resetBackupCode(e,function(e){jQuery.each(e.BackUpCodes,function(e,t){o+='<div class="backupcode-div"><input class="backupcode-width" id="\''+t+"'\" onClick=\"copyToClipboard('"+t+'\');this.select();" type="text" readonly value="'+t+'" /></div>'}),o+="</div><div><span onclick='copybackupcode()' id='copybackupcode'>Copy</span> <span class='copyMessage'>Copied!</span></div></td>",jQuery("#codelist").html(o),jQuery("#ciam_loading_gif").hide()},function(e){}))},1)}function copyToClipboard(e){var o=document.createElement("input");o.style="position: absolute; left: -1000px; top: -1000px",o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}function getbackupcode(e){var o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.api.getBackupCode(e,function(e){jQuery.each(e.BackUpCodes,function(e,o){})},function(e){}))},1)}function resetPassword(e){var o={container:"resetpassword-container",onSuccess:function(o){ciamfunctions.message(commonOptions.messageList.RESET_PASSWORD_MSG,"#resetpassword","success"),jQuery("#ciam_loading_gif").hide(),window.location.href=e},onError:function(e){ciamfunctions.message(e[0].Description,"#resetpassword","error"),jQuery("#ciam-resetpassword-password,#ciam-resetpassword-confirmpassword").val(""),jQuery("#ciam_loading_gif").hide()}},t=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(t),LRObject.init("resetPassword",o))},1)}function loadingimg(){var e=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(e),LRObject.$hooks.register("startProcess",function(e){jQuery("#ciam_loading_gif").show()}),LRObject.$hooks.register("endProcess",function(e){"resendOTP"===e&&jQuery("#login-container").length>0&&ciamfunctions.message(commonOptions.messageList.LOGIN_BY_PHONE_MSG,"#loginmessage","success")}),LRObject.$hooks.register("afterFormRender",function(e){"socialRegistration"===e&&(show_birthdate_date_block(),jQuery("#registration-container,#interfacecontainerdiv,#login-container").hide(),jQuery("#ciam_loading_gif").hide()),"twofaotp"!=e&&"otp"!=e&&"loginRequiredFieldsUpdate"!=e&&"showQRcode"!=e||(jQuery("#interfacecontainerdiv").hide(),jQuery("#ciam_loading_gif").hide()),"otp"==e&&ciamfunctions.message(commonOptions.messageList.REGISTRATION_OTP_MSG,"#registration_message","success"),"twofaotp"==e&&ciamfunctions.message(commonOptions.messageList.TWO_FA_MSG,"#loginmessage","success"),"registration"===e&&show_birthdate_date_block(),"login"===e&&show_birthdate_date_block()}))},1)}jQuery(document).ready(function(){jQuery("#submit").on("click",function(){if(jQuery("#loginradius-changepassword-newpassword").val()!==jQuery("#loginradius-changepassword-confirmnewpassword").val())return ciamfunctions.message("New Password must match with Confirm Password!","#msg","error"),!1})});var ciamfunctions={message:function(e,o,t){ciamautohidetime>0?"error"==t?jQuery(o).text(e).css("color","#FF0000").show().fadeOut(1e3*ciamautohidetime):jQuery(o).text(e).css("color","#008000").show().fadeOut(1e3*ciamautohidetime):"error"==t?jQuery(o).text(e).css("color","#FF0000").show():jQuery(o).text(e).css("color","#008000").show()},redirect:function(e,o,t){var s=o||"token",i=document.createElement("form");i.action=window.location.href,i.method="POST";var n=document.createElement("input");n.type="hidden",n.value=e,n.name=s,i.appendChild(n),document.body.appendChild(i),i.submit()}};function showAndHideCustomDiv(e){"samepage"===e||"homepage"===e||"dashboard"===e||"prevpage"===e?jQuery("#customRedirectUrlField").hide():jQuery("#customRedirectUrlField").show()}function copybackupcode(){var e="",o="";jQuery(".backupcode-div").each(function(){e+=jQuery(this).html()+"\n"}),jQuery(e).each(function(){o+=jQuery(this).val()+"\n"});var t=document.createElement("textarea");t.style="position: absolute; left: -1000px; top: -1000px",t.value=o,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),jQuery(".copyMessage").css("color","#008000").show(),setTimeout(removeCodeCss,5e3)}function removeCodeCss(){jQuery(".code-list").find("span").removeAttr("style"),jQuery(".copyMessage").hide()}function show_birthdate_date_block(){var e=(new Date).getFullYear(),o=e-100;jQuery("body").on("focus",".loginradius-birthdate",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:o+":"+e})})}jQuery(document).ready(function(e){showAndHideCustomDiv(jQuery('input:radio[name="ciam_authentication_settings[after_login_redirect]"]:checked').val()),jQuery('input:radio[name="ciam_authentication_settings[after_login_redirect]"]').change(function(){showAndHideCustomDiv(jQuery(this).val())}),"undefined"!=typeof tabValue&&""!==tabValue&&(e(".ciam-options-tab-btns li").removeClass("ciam-active"),e(".ciam-tab-frame").removeClass("ciam-active"),e('*[data-tab="'+tabValue+'"]').addClass("ciam-active"),e("#"+tabValue).addClass("ciam-active")),e(".ciam-options-tab-btns li").click(function(){var o=e(this).attr("data-tab");e(".ciam-options-tab-btns li").removeClass("ciam-active"),e(".ciam-tab-frame").removeClass("ciam-active"),e(this).addClass("ciam-active"),e("#"+o).addClass("ciam-active")})});